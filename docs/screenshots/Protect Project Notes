Gmail	Jason Resch <jasonresch@gmail.com>
Dev TODO
Jason Resch <jasonresch@gmail.com>	Fri, Mar 8, 2019 at 1:51 PM
To: Jason Resch <jasonresch@gmail.com>

Open:

https://help.github.com/en/articles/about-readmes

https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet

https://stackoverflow.com/questions/4279611/how-to-embed-a-video-into-github-readme-md

https://stackoverflow.com/questions/4279611/how-to-embed-a-video-into-github-readme-md

https://damien.pobel.fr/post/youtube-video-github/



DKH and PROSS over BFT


BFT, how difficult to run?


    Go revise paper


    Run as multiple servers, be 5X faster? Try with 3 shareholders, with 11.
        Way to do multiplication to do DSA.
        5 on a LAN, 5 on a distributed system.


    Ways to do multiplication. Research front. Implement it.


    Do proactive
        PROSS, Reconstruct. State recovery.


    Client auth.


    Signature app. BLS? Schnorr. Create signatures. ElGAmal decryption.
        Provide descriptions in distributed model.
        BLS
        DSS (Protocols out there, Yuda, Rosario?) How efficient are they?
        EdDSA?


    Global run
    Running it distributed.
    Do multiplication
    Rosarios paper, Yuden's thing. CCS paper? Are our designs more efficient.


Chrysa:

    Notation not consistent
    fS then tS later
    Proofs use t.
    S&P, have comments. work on them. CCS. 2019.





Implementation todo:

================



    Client Functionality
        Client-side password PBKDF12, iteration. For key hardening. > Create EC key from password.
            Support throttling OPRF operations
        Make command to read and reassemble the secret (show how after it refreshes, get same data back)
            Make them mainly curl scripts with python to do interpolation, etc.
            Show how it can be done via the website, but it is difficult
        Make RSA key storage client, send e, N, share, V, and all shareholder shares
            Make an RSA recovery client, use the results to sign a file. Compute TBS locally, blind it. Send it to the servers as an input. Get the result back, unblind it, produce certificate. Show how openSSL now verifies it against a CA cert whose public key matches the one that was stored.
        Support authenticating OPRF operations
        Blind RSA/BLS signature client
        RSA Signing (if have time), make client to store shares, disable refresh? reconstruct?
        BLS signing option
        Make interactive client CLI
            Sign
            OPRF
                Return response (optimistic concurrency, secret version, might not be consistent)
    Documentation - update Github page with the following
        Install instructions
            Define pre-requisites
                Java 8
                maven
                git
                curl
                python (use threshold client)?  Java client?
            Building
        Deployment
            Key Generation
                KeyGeneratorCli config/client/keys/ security_officer
            CA setup
                Instructions to delete CAs, start fresh (DON'T USE DEFAULT)
                CertificateAuthorityCli config/ca config/server/keys config/server/certs true
                CertificateAuthorityCli config/ca config/client/keys config/client/certs false
                Add documented step for generating a new CA key
                    Auto-generate client certificates from public keys
                    Auto-generate server certificates from their public keys
                    Do cert and ca generation during key creation.
                    Use curl, use browser.
                    Make new scripts in the bin folder to simplify process
                Have blank keys setup for bin directory, require running "gen keys" script to generate client and server keys and certificates
            Server setup
            Client setup
                Command line
                    Using curl
                        $ curl --cacert pross-server/config/ca/ca-cert-server-5.pem --cert pross-server/config/client/certs/cert-1 --key pross-server/config/client/keys/private-1 https://localhost:8085/id
                    Client CLI
                Browser (Firefox)
                    Import server CAs
                    Import user p12 file
                        Importing with firefox, default password "password".
        Configuration
            Server configuration
                Add example server config file modification
            Client configuration
                Add example client config file modification
                Make all client ids distinct from server ids. Use numbers greater than 10, start with 1000.
        Starting the Service
            Running servers
        Secret Management
            Creating a Secret
                Generating a random key
                Storing a specific key (requires trusted dealer)
                    Python utility to generate shares (n. t. integer), must store all.
                    Compute expected public key as well.
                    ./shamir-share.py 5 3 12345 secp256r1
            Deleting a secret
                Use a script in curl, or CLI
            Enabling / Disabling a secret
        References
            Link to papers in the source (and on the GitHub page, victor shoup, etc., BLS signatures, pairing, blind RSA signatures, chaum, Hugo's TOPPS, paper, etc.)  Use references from NIST paper. Include NIST draft paper, presentation slides?
        Respond to the commenter about running it
    Finish handlers
        GenerateHandler
            Allow curve specification at DKG time (to support BLS pairings)
                Use drop down (NIST P-256), BN (pairing friendly)
                Store the curve info in the shareholder
            Take refresh frequency as parameter in DKG creation
    Stretch / Low Priority:
        State Persistance
            Fix state-persistence (use new serializer, use separate file per message)
            i.e. MessageDeliveryManager.persistStateMake persistent state (by default) don't lose data. Allow restart. Update BFT handler to support this. Send all messages that have been received.
        Include current "n" and "t" to establish at end of operation (supporting change of n and t). - N and T as parameters to DKG/Refresh.
        Monitor file for updates, and auto-refresh:
            https://www.codejava.net/java-se/file-io/file-change-notification-example-with-watch-service-api
                Config file (auto-refresh, e.g. BFT, etc.) on change, re-connect.
                    Does this need to be a BFT change message???
                Client permission file
                Public/private key file
        Force Refresh
            Request proactive update. (take a secret name). Next to epoch ID "Force Refresh Now"
        Extensive unit tests
        BFT
            Figure out how to get BFT to start without all servers...
            How to make not resend when already sent a contribution before a crash???
        Zero Knowledge Proofs to all exponentiate/sign operations



Finished:

    Switch back to Java 8. (done)
    Print benchmark results on start up (modPow, ECDSA, EdDSA, Pallier encrypt, decrypt)
    Wait for BFT layer to finalize before prompting
    Make key generation straight forward, print public key file afterwards.
    Make single conf directory for key loader
    Make single conf file for the hosts file
    Make signature generation/verification code be key-type dependent
        EdDSA vs. ECDSA keys, support both
    During protocol Print:
        (start of protocol), 
        new BFT message,
        new Certified message available.
    At end of protocol print: 
        (share, 
        public keys of shareholders, 
        Feldman values
        public key of secret, indented. 
        (total runtime, start to end).  
        Total signatures computed.
    Build a Jar and a ZIP file
    Create client permissions system
    Consolidate common elements from the BFT system config and common config
        Move system config to BFT folder under config
    Persist messages (use serializer?)
        Make library persist all the BFT messages in separate files (file to list messages in BFT chain)
        Make library persist all Certified messages in separate files (make a tool to list/output messages)
    Make message list tool
        For each message printed, indicate if it is in BFT, Certified, or both, check box. (confirmed/unconfirmed)
        Take server id
        Validate signatures (print if valid or not)
    Improve appearance of SignedMessage to string
        Figure out why serializer/deserializer is not working as expected
    Wrote code to perform access control enforcement
        Permission loading
        Permission checks
    Config file
        Update implementation to use default values
        Programmatic enforcement of all the constraints in the conf file (print meaningful error for each/any violation). Print all errors at once.
    Switch to use secure mod pow (secure against timing/side channel attacks)
    Support multiple named keys (keep instances in separate map, update protocol messages)
    Make CA fo each of the n servers. (simplifies deployment instructions, no SPOF)
    Support HTTPS and client/server certificate auth
        Create a CertificateAuthority (ca Private key)
    Make interactive: send command to initiate DKG. Triggers others when they see it.
        Include operation type: "dkg", "refresh", "reconstruct"
            Send a BFT message to start DKG
    Implement client-side requests to the server (over HTTPS)
        Identify client from client certificate used in HTTPS
        Permission verification
        Signed requests (client id, message, signature) over HTTPS
            Check against permissions loaded from file
    Finished handlers:
        Root
        Info
        ID
        Read
        Exponentiate 
        Enable
        Disable
        Delete
    Implement proactive
        Update DKG to use proactive
            Consider using interpolation rather than addition for first secret/DKG
                Makes it easier for storing, use normal DKG but with specific value, order won't matter.
            Have epochs add to a list. Keep all variables in separate "epoch"
    Figure out why secret changes for first proactive refresh only! (weird bug different share used)
    Figure out spurious null point in chain builder causing crashes (not scheduling new task)
    Figure out why stops after 25 messages (spurious if check)
    Check that the public key of the secret matches before advancing the epoch
    Add navigation for epochs <<  <  current >   >>
        Optional parameter for InfoHandler.
    Wipe old share once new refresh completes
    Check each shareholders contribution against their own share during DKG
    Figure out null pointer exception in ChainBuildingMessageHandler (above)
    Support refresh-based recovery after a share deletion (clean up deletion handling in general
    BFT
        Figure out serialization of state so it can recover
        Figure out why fails with wrong signature after certain time
    Store/Generate Handler:
        Implement store by having sender supply share values to each shareholder which are used to execute DKG
            Proves it works, establishes base, etc. 
            Cache the secret (rather than generating it randomly) then when DKG starts use it.
                Generate shares of some value (have pre-generated)
    Recover (specify secret, learn epoch in response)
        Add recover permission
        Verify against the previous share commitment before using.
        Restore randomness too
            sender
            recipient
            epoch
            share1_part
            share2_part
        Request reconstruct. (take a name and shareholder id)
            Use HTTPS protocol, fetch specific value, rely on previous DKG for info.
            Print recovery time in milliseconds
    CA / Cert / Key Generation:
        Have CAs all internal to each server/client especially.  Don't need to use a specific CA for the client, can be self signed.  Just need them to support TLS (but browsers might need specific...)
        For clients use the client permissions file to learn client ids, don't iterate.
        Make it so loading client certificates doesn't cause a crash.
    Updated client configuration to use user names
    Make config replace list of servers from BFT conf file!
    Don't hide info on previous epochs...
    Remove RSA storage from web interface (too unwieldily)
    Client Functionality
        Add flag to get json responses from the server
        Encrypt/Decrypt client with ECIES encryption. Encrypt with public key of g^s, decrypt after interaction with servers. Only someone with access to servers and can exponentiate can decrypt.



Immediate Focus:



Practice giving presentation.

Create video recordings.

Upload to youtube.

Include slides on project page.

Re-run tests



Demo commands:

=============


Encrypt file:


./ecies-encrypt.sh config/ administrator prf-secret ENCRYPT secret.txt out.enc



Recover encrypted file:


./ecies-encrypt.sh config/ administrator prf-secret DECRYPT  out.enc restored.txt



Generate Threshold RSA key


./threshold-ca.sh config signing_user rsa-secret GENERATE threshold-ca.pem "CN=threshold"



View CA key

openssl x509 -text -noout -in threshold-ca.pem 

 (Note, no private key anywhere, it was thresholdized and stored to the servers as shares)  We leave the public key here to get the issuer name and also to double-check the resulting certificate's validity.


Generate user key pair

openssl ecparam -name prime256v1 -genkey -noout -out priv-key.pem && openssl ec -in priv-key.pem -pubout -out pub-key.pem

(need to add "EC")



Use the threshold CA to issue a certificate for this new public key


./threshold-ca.sh config signing_user rsa-secret ISSUE threshold-ca.pem pub-key.pem new-cert.pem "CN=example-entity" 


View Key and Certificate

ec -text -noout -in priv-key.pem

openssl x509 -text -noout -in new-cert.pem


Verify it


openssl verify -verbose -CAfile threshold-ca.pem new-cert.pem






curl --cacert pross-server/config/ca/ca-cert-server-5.pem --cert pross-server/config/client/certs/cert-administrator --key pross-server/config/client/keys/private-administrator "https://localhost:8085/exponentiate?secretName=prf-secret&x=8968264028836463479781803114377394639649772089185025260875842702424765933290&json=true" | jq .


curl --cacert pross-server/config/ca/ca-cert-server-5.pem --cert pross-server/config/client/certs/cert-administrator --key pross-server/config/client/keys/private-signing_user "https://localhost:8085/exponentiate?secretName=rsa-secret&message=896826402883" | jq .



Ideas:

    Exponentiate, rewrite to return json, param
    Java client, generate new RSA key, and certificate to file, also store shares to server
    Keep group information in SharingState
    Have method to set SharingState, called from store handler
    Use "v" as the "g" for the RSA group, group modulus is "N"
    Java client, get results, produce RSA signature
        Need to implement PKCS padding, manipulate ASN.1?
    Similar java client for ECIES encryption, encrypt a file with public key. Open file, show encrypted.
        Decrypt it via interaction with threshold, show recovered plaintext.


Work on documentation over the weekend/on plane, don't do it now. Get slides, data, client functions, and recordings done.







# Problem: CertificationMessages sent by us are not being acknowledged by anyone. We keep trying to send them forever because they are not acknowledged.  Workflow is as follows:

    APVSS sends a message to the BFT
    BFT delivers message (BftListenerWrapper -> ChainBuildingMessageManager.receivedSerializedMessage)
    We add it to the BFT Chain
    We create a CertificationPayload (including index and content of BFT message)
    We broadcast the certification message over P2P links (MessageDeliveryManager.broadcast(public message)
    Makes its way to MessageDeliveryManager.receive() (private) as a SignedMessage, bypassing public receive.
    This adds an entry to the messageStateTracker (to persistently send)
    We then call sendOnce() to send (and will keep sending until witness is confirmed by an acknowledgement)
    sendOnce converts the message to a SignedRelayedMessage, setting isAcknoweldgement = false.
    This message then gets sent directly over P2P links.
    Message goes out over MessageSender via attemptMessageDelivery method.
    Serialized over TCP
    MessageReceiver's listening thread spawns a message processing task
    MessageProcessingTask receives data over TCP and ensues message in messageQueue
    MessageDeliveryManager gets message from queue in its messageReceiveProcessingThread
    Data is deserialized as a SignedRelayedMessage
    public receive() method is invoked with the signedRelayedMessage 
    We send it back as an acknowledgment.  Should count as new sender, mark as seen.
    Now get to private() receive method, invoke MessageStateTracker.recordMessage method
    If message seen for the first time, we call handle (ChainBuildingMessageHandler.handleMessage)
    The handle method records votes for message positions by looking at the CertificationPayload
        If enough votes delivered, then it makes it to the BFT chain
    We then broadcast it out to anyone who hasn't seen it
    The tracker isn't able to lookup our own own message!
        We keep sending our own fridge messages!




Server get encrypted partial:

curl --cacert pross-server/config/ca/ca-cert-server-5.pem --cert pross-server/config/server/certs/cert-2 --key pross-server/config/server/keys/private-2 https://localhost:8085/partial?secretName=prf-secret


curl --cacert pross-server/config/ca/ca-cert-server-5.pem --cert pross-server/config/server/certs/cert-2 --key pross-server/config/server/keys/private-2 https://localhost:8085/partial?secretName=prf-secret | jq .


==========================================


Launched 7 t2.2xlarge instances, 8 cores, 32 GB RAM:

https://console.aws.amazon.com/ec2/v2/home?region=us-east-1#Instances:sort=monitoring


8 vCPUs, 32 GB ram

model name	: Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz


TODO: Backup private keys


servers:

54.161.70.6

34.227.95.129

54.145.96.96

54.162.210.145

52.91.83.22

3.81.113.1

18.209.33.90


172.31.36.45

172.31.43.244

172.31.39.255

172.31.47.83

172.31.43.173

172.31.35.95

172.31.37.106


ssh -i ~/.ssh/test.pem ubuntu@34.230.15.153

ssh -i ~/.ssh/test.pem ubuntu@54.163.89.95

ssh -i ~/.ssh/test.pem ubuntu@18.207.231.110

ssh -i ~/.ssh/test.pem ubuntu@18.209.175.166

ssh -i ~/.ssh/test.pem ubuntu@54.166.129.186

ssh -i ~/.ssh/test.pem ubuntu@3.94.84.194

ssh -i ~/.ssh/test.pem ubuntu@52.203.143.1


sudo apt-get-update

sudo apt-get install openjdk-8-jdk-headless

sudo apt install maven

sudo apt install python

git clone https://github.com/jasonkresch/protect.git

cd protect

./build.sh

cp -r ../pross-server/config/ .

rm config/currentView

rm ./bin/config/currentView

ubuntu@ip-172-31-39-191:~/protect$ rm ./bft-smart/config/currentView

vim config/server/bft-config/system.config:

system.initial.view = 0,1,2,3,4,5,6


ubuntu@ip-172-31-46-249:~/protect/bin$ rm config/currentView

ubuntu@ip-172-31-46-249:~/protect/bin$ vim config/server/common.config

ubuntu@ip-172-31-46-249:~/protect/bin$ vim config/server/bft-config/system.config

ubuntu@ip-172-31-46-249:~/protect/bin$ ./run-server.sh 5



clear

(stop broadcast)


 ModPow: 1748/s;  ECDSA Sign: 2829/s;  ECDSA Verify: 2227/s;  EdDSA Sign: 5423/s;  EdDSA Verify: 3797/s;  Paillier Encrypt: 71/s;  Paillier Decrypt: 73/s;  Split Prove: 700/s;  Split Verify: 868/s;  EqRange Prove: 29/s;  EqRange Verify: 29/s;

Connecting to replica 0 at /35.153.200.97:65210

Connecting to replica 1 at /3.90.37.249:65220

Connecting to replica 2 at /35.153.133.182:65230

Connecting to replica 3 at /3.81.118.79:65240

Connecting to replica 4 at /4.205.120.119:65250


Private IPs:

172.31.39.191   - 1

172.31.45.212  - 2

172.31.35.244   - 3

172.31.37.12     - 4

172.31.46.249  - 5

172.31.43.251  - 6

172.31.32.96   - 7


Need to get server order correct


============


7 servers, lan


vailable.

Time to establish share:             2.900065082 seconds

Certified message #9 is available.

Certified message #10 is available.

Certified message #11 is available.

Certified message #12 is available.

Certified message #13 is available.

Certified message #14 is available.

Time to establish verification keys: 3.590757442 seconds


 available.

Time to establish share:             3.504184088 seconds

Time to establish verification keys: 4.20488245 seconds


:             3.490863447 seconds

Time to establish verification keys: 4.18590384 seconds


e #14 is available.

Time to establish share:             3.485093372 seconds

Time to establish verification keys: 4.178571065 seconds




Certified message #14 is available.

Time to establish share:             3.490863447 seconds

Time to establish verification keys: 4.18590384 seconds



s available.

Time to establish share:             3.498849432 seconds

Time to establish verification keys: 4.198748619 seconds


:             3.384991141 seconds

Time to establish verification keys: 4.027158215 seconds


Time to establish share:             3.53882236 seconds

Time to establish verification keys: 4.23643272 seconds



First refresh:


Time to establish share:             2.021426671 seconds

Time to establish verification keys: 2.720148032 seconds


Time to establish share:             3.283767449 seconds

Time to establish verification keys: 3.966633212 seconds


Time to establish share:             2.023468843 seconds

Time to establish verification keys: 2.710050798 seconds


Time to establish share:             2.016576235 seconds

Time to establish verification keys: 2.698546728 seconds


Certified message #28 is available.

Time to establish share:             2.058524416 seconds

Time to establish verification keys: 2.747596631 seconds


Time to establish share:             2.15456127 seconds

Time to establish verification keys: 2.771029673 seconds


Time to establish share:             2.009047956 seconds

Time to establish verification keys: 2.703332318 seconds


Second refresh:

Time to establish share:             2.34536055 seconds

Time to establish verification keys: 3.040684442 seconds



Time to establish share:             2.363499779 seconds

Time to establish verification keys: 3.045224355 seconds


Time to establish share:             2.306190414 seconds

Time to establish verification keys: 2.991205525 seconds


Time to establish share:             2.356098281 seconds

Time to establish verification keys: 3.035886904 seconds


Time to establish share:             2.54752213 seconds

Time to establish verification keys: 3.159523961 seconds


Time to establish share:             2.328802642 seconds

Time to establish verification keys: 3.02587222 seconds


============


6 servers:


Time to establish share:             2.434214396 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #10 is available.

Certified message #11 is available.

Certified message #12 is available.

Time to establish verification keys: 3.029761685 seconds



Time to establish share:             3.107508733 seconds

Time to establish verification keys: 3.708292411 seconds


Time to establish share:             3.098679939 seconds

Time to establish verification keys: 3.693720817 seconds


Time to establish share:             3.082770427 seconds

Time to establish verification keys: 3.668988302 seconds


Time to establish share:             2.996511417 seconds

Time to establish verification keys: 3.547685704 seconds


Time to establish share:             3.114899558 seconds

Time to establish verification keys: 3.708402758 seconds



First refresh:


Time to establish share:             1.661778474 seconds

Time to establish verification keys: 2.257107521 seconds


Time to establish share:             2.949805147 seconds

Time to establish verification keys: 3.531340108 seconds


Time to establish share:             1.659220825 seconds

Time to establish verification keys: 2.25072679 seconds


Time to establish share:             1.693046412 seconds

Time to establish verification keys: 2.274922247 seconds


Time to establish share:             1.797332881 seconds

Time to establish verification keys: 2.328734005 seconds


Time to establish share:             1.665873485 seconds

Time to establish verification keys: 2.253481526 seconds


Second refresh:


Time to establish share:             1.9854221 seconds

Time to establish verification keys: 2.580586943 seconds


Time to establish share:             1.976468415 seconds

Time to establish verification keys: 2.556674076 seconds


Time to establish share:             1.964385212 seconds

Time to establish verification keys: 2.558788397 seconds


Time to establish share:             2.003864922 seconds

Time to establish verification keys: 2.583455547 seconds


Time to establish share:             2.010676346 seconds

Time to establish verification keys: 2.545744336 seconds


Time to establish share:             2.010192356 seconds

Time to establish verification keys: 2.597034724 seconds


==========


5 servers


Time to establish share:             2.270375127 seconds

Certified message #7 is available.

Certified message #8 is available.

Certified message #9 is available.

Certified message #10 is available.

Time to establish verification keys: 2.60821391 seconds


Time to establish share:             2.916208603 seconds

Time to establish verification keys: 3.260301441 seconds


Time to establish share:             2.924711501 seconds

Time to establish verification keys: 3.27053993 seconds


Time to establish share:             2.932411217 seconds

Time to establish verification keys: 3.273384518 seconds


Time to establish share:             2.94342598 seconds

Time to establish verification keys: 3.285634069 seconds


First refresh:


Time to establish share:             1.743924375 seconds

Time to establish verification keys: 2.073548765 seconds


Time to establish share:             2.914732539 seconds

Time to establish verification keys: 3.240322774 seconds


Time to establish share:             1.740040113 seconds

Time to establish verification keys: 2.06781299 seconds


Time to establish share:             1.730246502 seconds

Time to establish verification keys: 2.05688721 seconds


Time to establish share:             1.725389963 seconds

Time to establish verification keys: 2.051665978 seconds


Second refresh:


Time to establish share:             1.888507617 seconds

Time to establish verification keys: 2.21816552 seconds


Time to establish share:             1.869384224 seconds

Time to establish verification keys: 2.194229627 seconds


Time to establish share:             1.892154384 seconds

Time to establish verification keys: 2.218575759 seconds


Time to establish share:             1.880030862 seconds

Time to establish verification keys: 2.205195904 seconds


Time to establish share:             1.886089732 seconds

Time to establish verification keys: 2.21322857 seconds


=======


4 servers


Time to establish share:             1.8883548 seconds

Certified message #6 is available.

Certified message #7 is available.

Certified message #8 is available.

Time to establish verification keys: 2.15852289 seconds


Time to establish share:             2.594489485 seconds

Time to establish verification keys: 2.861885702 seconds


Time to establish share:             2.592876724 seconds

Time to establish verification keys: 2.854097124 seconds


Time to establish share:             2.603551852 seconds

Time to establish verification keys: 2.866668407 seconds


First refresh:


Time to establish share:             1.440114907 seconds

Time to establish verification keys: 1.704583139 seconds


Time to establish share:             2.553161019 seconds

Time to establish verification keys: 2.816132416 seconds


Time to establish share:             1.442095115 seconds

Time to establish verification keys: 1.702782477 seconds


Time to establish share:             1.432351375 seconds

Time to establish verification keys: 1.695931161 seconds


Second refresh:


Time to establish share:             1.557241706 seconds

Time to establish verification keys: 1.82051666 seconds


Time to establish share:             1.571709578 seconds

Time to establish verification keys: 1.832440267 seconds


Time to establish share:             1.55718438 seconds

Time to establish verification keys: 1.819806489 seconds


Time to establish share:             1.565212872 seconds

Time to establish verification keys: 1.822877386 seconds


====== 


3 servers


Time to establish share:             1.728064548 seconds

Certified message #5 is available.

Certified message #6 is available.

Time to establish verification keys: 1.831282704 seconds


Time to establish share:             2.452831106 seconds

Time to establish verification keys: 2.553688648 seconds


Time to establish share:             2.460620836 seconds

Time to establish verification keys: 2.564263361 seconds


First refresh:


Time to establish share:             1.360595078 seconds

Time to establish verification keys: 1.461092494 seconds


Time to establish share:             2.450960201 seconds

Time to establish verification keys: 2.555276746 seconds


Time to establish share:             1.350994702 seconds

Time to establish verification keys: 1.450619988 seconds


Second refresh:


Time to establish share:             1.454618265 seconds

Time to establish verification keys: 1.555585357 seconds


Time to establish share:             1.446633952 seconds

Time to establish verification keys: 1.54678645 seconds


Time to establish share:             1.448723411 seconds

Time to establish verification keys: 1.547820739 seconds


=====


150 ms latency:

sudo tc qdisc add dev eth0 root netem delay 150ms

sudo tc qdisc del dev eth0 root netem



Re-run tests:

3 servers, 150 ms latency all traffic:


Time to establish share:             3.834994953 seconds

Certified message #5 is available.

Time to establish verification keys: 4.085319381 seconds


Time to establish share:             3.654743113 seconds

Time to establish verification keys: 3.760066526 seconds


Time to establish share:             3.955955442 seconds

Time to establish verification keys: 4.058429151 seconds



First refresh:


Time to establish share:             3.009839935 seconds

Time to establish verification keys: 3.110689013 seconds


Time to establish share:             3.505679132 seconds

Time to establish verification keys: 3.604976643 seconds


Time to establish share:             2.712572722 seconds

Time to establish verification keys: 2.816840118 seconds


Second refresh:

Time to establish share:             3.00000805 seconds

Time to establish verification keys: 3.100614043 seconds


Time to establish share:             3.002038407 seconds

Time to establish verification keys: 3.101977828 seconds


Time to establish share:             2.997796316 seconds

Time to establish verification keys: 3.096690769 seconds


==== 


4 servers 150 ms latency


Time to establish share:             4.427284426 seconds

Certified message #6 is available.

Time to establish verification keys: 4.705445469 seconds


Time to establish share:             4.540160444 seconds

Time to establish verification keys: 4.804595043 seconds


Time to establish share:             4.078685773 seconds

Certified message #8 is available.

Time to establish verification keys: 4.33996755 seconds


Time to establish share:             4.993654512 seconds

Time to establish verification keys: 5.258165161 seconds


First refresh:


Time to establish share:             4.327687935 seconds

Time to establish verification keys: 4.58981266 seconds


Time to establish share:             2.910103092 seconds

Time to establish verification keys: 3.170779937 seconds


Time to establish share:             3.377426443 seconds

Time to establish verification keys: 3.63619823 seconds


Time to establish share:             2.90938928 seconds

Time to establish verification keys: 3.170269327 seconds


Second refresh:


Time to establish share:             3.400020557 seconds

Time to establish verification keys: 3.66016632 seconds


Time to establish share:             3.853583666 seconds

Time to establish verification keys: 4.11472219 seconds


Time to establish share:             3.406447277 seconds

Time to establish verification keys: 3.665980322 seconds


Time to establish share:             3.854772178 seconds

Time to establish verification keys: 4.112534589 seconds


=====


5 servers, 150 ms latency


Time to establish share:             5.094208339 seconds

Certified message #7 is available.

Certified message #8 is available.

Time to establish verification keys: 5.552156238 seconds


Time to establish share:             4.854862213 seconds

Certified message #10 is available.

Time to establish verification keys: 5.200510694 seconds


Time to establish share:             5.800304072 seconds

Time to establish verification keys: 6.141677803 seconds


Time to establish share:             5.308189867 seconds

Time to establish verification keys: 5.650668704 seconds


Time to establish share:             4.398540841 seconds

Certified message #9 is available.

Time to establish verification keys: 4.741466709 seconds


First refresh:


Time to establish share:             4.483726961 seconds

Certified message #20 is available.

Time to establish verification keys: 4.812651768 seconds


Time to establish share:             3.451657817 seconds

Time to establish verification keys: 3.778390579 seconds


Time to establish share:             2.963344573 seconds

Time to establish verification keys: 3.289618789 seconds


Time to establish share:             3.00293953 seconds

Time to establish verification keys: 3.33141864 seconds


Time to establish share:             3.913226202 seconds

Certified message #20 is available.

Time to establish verification keys: 4.239314865 seconds


Second refresh:


Time to establish share:             3.824112054 seconds

Certified message #27 is available.

Certified message #28 is available.

Time to establish verification keys: 4.333705596 seconds


Time to establish share:             4.278283925 seconds

Certified message #28 is available.

Certified message #29 is available.

Time to establish verification keys: 4.60372316 seconds


Time to establish share:             4.730020729 seconds

Time to establish verification keys: 5.05591558 seconds


Time to establish share:             3.825943978 seconds

Certified message #27 is available.

Certified message #28 is available.

Certified message #29 is available.

Time to establish verification keys: 4.152744132 seconds


Time to establish share:             4.279336914 seconds

Certified message #28 is available.

Certified message #29 is available.

Time to establish verification keys: 4.60670804 seconds


=====


6 servers 150 ms latency


Time to establish share:             5.432461509 seconds

Certified message #9 is available.

Time to establish verification keys: 6.190488553 seconds


Time to establish share:             5.177944874 seconds

Certified message #10 is available.

Certified message #11 is available.

Certified message #12 is available.

Time to establish verification keys: 5.768415217 seconds


Time to establish share:             5.637603707 seconds

Time to establish verification keys: 6.230849355 seconds


Time to establish share:             5.638781575 seconds

Time to establish verification keys: 6.232810148 seconds


Time to establish share:             5.638611311 seconds

Time to establish verification keys: 6.225121239 seconds


Time to establish share:             4.485856294 seconds

Certified message #9 is available.

Time to establish verification keys: 5.046040298 seconds


First refresh


Time to establish share:             4.705735065 seconds

Certified message #19 is available.

Certified message #20 is available.

Certified message #21 is available.

Certified message #23 is available.

Time to establish verification keys: 5.285961494 seconds


Time to establish share:             4.12123193 seconds

Certified message #20 is available.

Certified message #21 is available.

Certified message #23 is available.

Certified message #24 is available.

Time to establish verification keys: 4.707679455 seconds


Time to establish share:             3.662430972 seconds

Certified message #20 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #21 is available.

Certified message #22 is available.

Time to establish verification keys: 4.249732225 seconds


Time to establish share:             3.663161153 seconds

Certified message #20 is available.

Certified message #22 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #21 is available.

Time to establish verification keys: 4.250275038 seconds


Time to establish share:             4.851348758 seconds

Certified message #21 is available.

Certified message #22 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #20 is available.

Time to establish verification keys: 5.408358217 seconds


Time to establish share:             3.669855769 seconds

Certified message #20 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #21 is available.

Certified message #22 is available.

Time to establish verification keys: 4.249721706 seconds


Second refresh:


Time to establish share:             4.5887445 seconds

Certified message #31 is available.

Certified message #32 is available.

Certified message #33 is available.

Time to establish verification keys: 6.282220099 seconds


Time to establish share:             4.582793496 seconds

Certified message #31 is available.

Certified message #32 is available.

Certified message #33 is available.

Time to establish verification keys: 5.824291274 seconds


Time to establish share:             4.577780204 seconds

Certified message #31 is available.

Certified message #32 is available.

Certified message #33 is available.

Time to establish verification keys: 5.818099035 seconds


Time to establish share:             5.028463394 seconds

Certified message #32 is available.

Certified message #33 is available.

Time to establish verification keys: 5.817018406 seconds


Time to establish share:             4.586727448 seconds

Certified message #31 is available.

Certified message #32 is available.

Certified message #33 is available.

Time to establish verification keys: 5.864102964 seconds


Time to establish share:             4.605022525 seconds

Certified message #31 is available.

Certified message #33 is available.

Certified message #35 is available.

Certified message #32 is available.

Time to establish verification keys: 5.784985002 seconds


======


7 servers, 150 ms latency



Time to establish share:             6.553901519 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #10 is available.

Certified message #11 is available.

Time to establish verification keys: 8.444576887 seconds


Time to establish share:             5.922569766 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #10 is available.

Certified message #12 is available.

Certified message #13 is available.

Certified message #11 is available.

Time to establish verification keys: 7.233763625 seconds


Time to establish share:             5.913856721 seconds

Certified message #9 is available.

Certified message #10 is available.

Certified message #12 is available.

Certified message #8 is available.

Certified message #11 is available.

Certified message #13 is available.

Time to establish verification keys: 7.22427255 seconds


Time to establish share:             5.932397807 seconds

Certified message #8 is available.

Certified message #12 is available.

Certified message #10 is available.

Certified message #11 is available.

Certified message #13 is available.

Certified message #14 is available.

Certified message #9 is available.

Time to establish verification keys: 7.336679311 seconds


Time to establish share:             5.942436792 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #11 is available.

Certified message #12 is available.

Certified message #10 is available.

Certified message #13 is available.

Time to establish verification keys: 7.251457652 seconds


Time to establish share:             5.474444053 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #11 is available.

Certified message #12 is available.

Certified message #13 is available.

Certified message #14 is available.

Certified message #10 is available.

Time to establish verification keys: 7.144051398 seconds


Time to establish share:             5.926455057 seconds

Certified message #8 is available.

Certified message #9 is available.

Certified message #11 is available.

Certified message #12 is available.

Certified message #10 is available.

Certified message #13 is available.

Time to establish verification keys: 7.231785531 seconds


First refresh:


Time to establish share:             5.636003671 seconds

Certified message #22 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #25 is available.

Time to establish verification keys: 8.411208238 seconds


Time to establish share:             6.219234062 seconds

Certified message #22 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #25 is available.

Time to establish verification keys: 8.791289878 seconds


Time to establish share:             6.120964439 seconds

Certified message #22 is available.

Certified message #23 is available.

Certified message #25 is available.

Certified message #26 is available.

Certified message #27 is available.

Certified message #24 is available.

Time to establish verification keys: 8.988045282 seconds


Time to establish share:             6.217762692 seconds

Certified message #22 is available.

Certified message #23 is available.

Certified message #25 is available.

Certified message #26 is available.

Certified message #27 is available.

Certified message #24 is available.

Time to establish verification keys: 9.085585086 seconds


Time to establish share:             6.219364217 seconds

Certified message #22 is available.

Certified message #23 is available.

Certified message #24 is available.

Certified message #25 is available.

Time to establish verification keys: 8.795239606 seconds


Time to establish share:             5.855293134 seconds

Certified message #22 is available.

Certified message #26 is available.

Certified message #27 is available.

Certified message #28 is available.

Certified message #23 is available.

Certified message #25 is available.

Certified message #24 is available.

Time to establish verification keys: 9.196978504 seconds


Time to establish share:             6.219792169 seconds

Certified message #22 is available.

Certified message #24 is available.

Certified message #25 is available.

Certified message #23 is available.

Time to establish verification keys: 8.799429663 seconds


Second refresh:


Time to establish share:             8.71966296 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 15.226977247 seconds


Time to establish share:             9.418505755 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 16.372677072 seconds


Time to establish share:             8.669520389 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 16.076729319 seconds


Time to establish share:             9.122379033 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 16.07696354 seconds


Time to establish share:             9.414778124 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 16.371546703 seconds


Time to establish share:             6.880414356 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 14.228358474 seconds


Time to establish share:             9.859461106 seconds

Certified message #36 is available.

Certified message #37 is available.

Certified message #38 is available.

Certified message #39 is available.

Time to establish verification keys: 16.385928609 seconds


==============

Single server tests


7 servers


Time to establish share:             4.722250189 seconds

Time to establish verification keys: 5.444140225 seconds


Time to establish share:             4.995765464 seconds

Time to establish verification keys: 5.784627813 seconds


Time to establish share:             4.830841322 seconds

Certified message #10 is available.

Certified message #11 is available.

Certified message #12 is available.

Certified message #13 is available.

Certified message #14 is available.

Time to establish verification keys: 5.972937337 seconds


Time to establish share:             5.255222537 seconds

Time to establish verification keys: 5.985660507 seconds


Time to establish share:             4.785137372 seconds

Time to establish verification keys: 5.522731203 seconds


Time to establish share:             5.286204021 seconds

Time to establish verification keys: 6.006988114 seconds


First refresh:


Time to establish share:             3.868413021 seconds

Time to establish verification keys: 4.658667546 seconds


Time to establish share:             3.677601706 seconds

Time to establish verification keys: 4.465791054 seconds


Time to establish share:             3.970608887 seconds

Time to establish verification keys: 4.662726973 seconds


Time to establish share:             3.585830638 seconds

Time to establish verification keys: 4.354156123 seconds


Time to establish share:             5.255222537 seconds

Time to establish verification keys: 5.985660507 seconds


Time to establish share:             3.680477266 seconds

Time to establish verification keys: 4.496072358 seconds


Time to establish share:             3.273148302 seconds

Time to establish verification keys: 4.104789308 seconds


Second refresh:


Time to establish share:             4.224621885 seconds

Time to establish verification keys: 5.265375446 seconds


Time to establish share:             4.010546286 seconds

Time to establish verification keys: 4.926151153 seconds


Time to establish share:             4.321050898 seconds

Time to establish verification keys: 5.080106164 seconds


Time to establish share:             3.988757445 seconds

Time to establish verification keys: 4.964914707 seconds


Time to establish share:             3.432260427 seconds

Time to establish verification keys: 4.215177269 seconds


Time to establish share:             4.153905753 seconds

Time to establish verification keys: 4.892513196 seconds


Time to establish share:             3.825702288 seconds

Time to establish verification keys: 4.590421802 seconds


=========


6 servers


Time to establish share:             3.512698042 seconds

Time to establish verification keys: 4.147189861 seconds


Time to establish share:             3.324132893 seconds

Time to establish verification keys: 3.993871 seconds


Time to establish share:             3.593673104 seconds

Time to establish verification keys: 4.205116164 seconds


Time to establish share:             3.585776853 seconds

Time to establish verification keys: 4.204958514 seconds


Time to establish share:             3.268284836 seconds

Certified message #10 is available.

Certified message #11 is available.

Certified message #12 is available.

Time to establish verification keys: 3.909125355 seconds


Time to establish share:             3.376664987 seconds

Time to establish verification keys: 3.994206692 seconds


First Refresh:


Time to establish share:             2.06030474 seconds

Time to establish verification keys: 2.708934035 seconds


Time to establish share:             2.571473743 seconds

Time to establish verification keys: 3.305449168 seconds


Time to establish share:             2.107834015 seconds

Time to establish verification keys: 2.810519277 seconds


Time to establish share:             1.997652011 seconds

Time to establish verification keys: 2.602753276 seconds


Time to establish share:             3.408147887 seconds

Time to establish verification keys: 4.107825482 seconds


Time to establish share:             2.476460616 seconds

Time to establish verification keys: 3.159256986 seconds


Second Refresh:


Time to establish share:             3.328496694 seconds

Time to establish verification keys: 3.913771652 seconds


Time to establish share:             2.594013461 seconds

Time to establish verification keys: 3.279940398 seconds


Time to establish share:             2.720215285 seconds

Time to establish verification keys: 3.391417266 seconds


Time to establish share:             3.059505437 seconds

Time to establish verification keys: 3.71666894 seconds


Time to establish share:             2.948516662 seconds

Time to establish verification keys: 3.546106266 seconds


Time to establish share:             3.045758745 seconds

Time to establish verification keys: 3.661889501 seconds


====


5 servers, local


Time to establish share:             2.706034195 seconds

Certified message #9 is available.

Certified message #10 is available.

Time to establish verification keys: 3.072822272 seconds


Time to establish share:             3.110718165 seconds

Time to establish verification keys: 3.454822122 seconds


Time to establish share:             3.141240884 seconds

Time to establish verification keys: 3.473729236 seconds


Time to establish share:             2.978166778 seconds

Time to establish verification keys: 3.315995627 seconds


Time to establish share:             3.017326954 seconds

Time to establish verification keys: 3.361501619 seconds


First refresh:


Time to establish share:             2.901388938 seconds

Time to establish verification keys: 3.232091886 seconds


Time to establish share:             1.807491458 seconds

Time to establish verification keys: 2.142056293 seconds


Time to establish share:             1.780005642 seconds

Time to establish verification keys: 2.109498318 seconds


Time to establish share:             1.897025361 seconds

Time to establish verification keys: 2.227267879 seconds


Time to establish share:             1.99748846 seconds

Time to establish verification keys: 2.323981176 seconds


Second refresh:


Time to establish share:             2.082223764 seconds

Time to establish verification keys: 2.4108866 seconds


Time to establish share:             2.206350633 seconds

Time to establish verification keys: 2.536292758 seconds


Time to establish share:             2.11694062 seconds

Time to establish verification keys: 2.445744993 seconds


Time to establish share:             2.283189782 seconds

Time to establish verification keys: 2.612783418 seconds


Time to establish share:             2.13619327 seconds

Time to establish verification keys: 2.461250101 seconds


=========


4 servers, local


Time to establish share:             1.985251472 seconds

Certified message #6 is available.

Certified message #7 is available.

Certified message #8 is available.

Time to establish verification keys: 2.289928303 seconds


Time to establish share:             2.726549276 seconds

Time to establish verification keys: 2.987493147 seconds


Time to establish share:             2.638972018 seconds

Time to establish verification keys: 2.900615205 seconds


Time to establish share:             2.667073449 seconds

Time to establish verification keys: 2.928181779 seconds


First refresh:


Time to establish share:             2.533995185 seconds

Time to establish verification keys: 2.796580198 seconds


Time to establish share:             1.395054695 seconds

Time to establish verification keys: 1.655160059 seconds


Time to establish share:             1.502543111 seconds

Time to establish verification keys: 1.762832016 seconds


Time to establish share:             1.351745782 seconds

Time to establish verification keys: 1.611479518 seconds


Second refresh:


Time to establish share:             1.610051403 seconds

Time to establish verification keys: 1.870784218 seconds


Time to establish share:             1.581475211 seconds

Time to establish verification keys: 1.839105558 seconds


Time to establish share:             1.601431248 seconds

Time to establish verification keys: 1.859033917 seconds


Time to establish share:             1.668482222 seconds

Time to establish verification keys: 1.925830906 seconds


=========


3 severs, local



Time to establish share:             1.735356333 seconds

Certified message #5 is available.

Time to establish verification keys: 1.83896227 seconds


Time to establish share:             2.48455014 seconds

Time to establish verification keys: 2.586099383 seconds


Time to establish share:             2.451404943 seconds

Time to establish verification keys: 2.553546451 seconds


First refresh:


Time to establish share:             2.460606815 seconds

Time to establish verification keys: 2.56552585 seconds


Time to establish share:             1.329995728 seconds

Time to establish verification keys: 1.43397157 seconds


Time to establish share:             1.365371684 seconds

Time to establish verification keys: 1.469345367 seconds


Second Refresh:


Time to establish share:             1.629174657 seconds

Time to establish verification keys: 1.729998038 seconds


Time to establish share:             1.473682765 seconds

Time to establish verification keys: 1.573042289 seconds


Time to establish share:             1.484323894 seconds

Time to establish verification keys: 1.583752329 seconds





Show whisker graphs.
